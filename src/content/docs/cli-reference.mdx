---
title: CLI Reference
description: Complete command reference for all msgvault commands.
---

## Global Flags

| Flag | Description |
|---|---|
| `--config` | Path to config file (default: `~/.msgvault/config.toml`) |
| `--help` | Show help |

---

## init-db

Initialize the SQLite database.

```bash
msgvault init-db
```

---

## add-account

Add a Gmail account and authorize via OAuth.

```bash
msgvault add-account <email>
msgvault add-account <email> --headless
```

| Flag | Description |
|---|---|
| `--headless` | Show instructions for headless server setup |

---

## sync-full

Download all messages from a Gmail account. When called without an email argument, syncs all configured accounts.

```bash
msgvault sync-full [email] [flags]
```

| Flag | Description |
|---|---|
| `--limit N` | Maximum messages to download |
| `--after YYYY-MM-DD` | Only messages after this date |
| `--before YYYY-MM-DD` | Only messages before this date |
| `--noresume` | Ignore checkpoints, start fresh |
| `--verbose` | Detailed progress output |

---

## sync

Sync new and changed messages using Gmail History API. When called without an email argument, syncs all accounts that have completed an initial full sync.

```bash
msgvault sync [email]
```

---

## search

Search the archive with Gmail-like query syntax.

```bash
msgvault search <query> [flags]
```

| Flag | Description |
|---|---|
| `--json` | Output results as JSON |

See [Searching](/usage/searching/) for the full operator reference.

---

## tui

Launch the interactive terminal interface.

```bash
msgvault tui [flags]
```

| Flag | Description |
|---|---|
| `--account <email>` | Filter to a specific account |

---

## export-eml

Export a message as a `.eml` file.

```bash
msgvault export-eml [flags]
```

| Flag | Description |
|---|---|
| `--message-id N` | Internal database message ID |
| `--gmail-id <hex>` | Gmail message ID |
| `--output <path>` | Output file (default: stdout) |

---

## export-attachment

Export an attachment by its SHA-256 content hash.

```bash
msgvault export-attachment <content-hash> [flags]
```

| Flag | Description |
|---|---|
| `-o`, `--output <path>` | Output file path (use `-` for stdout) |
| `--base64` | Output raw base64 to stdout |
| `--json` | Output as JSON with base64-encoded data |

See [Exporting Data](/usage/exporting/) for usage examples.

---

## export-attachments

Export all attachments from a message as individual files.

```bash
msgvault export-attachments <message-id> [flags]
```

| Flag | Description |
|---|---|
| `-o`, `--output <dir>` | Output directory (default: current directory) |

Accepts internal numeric IDs or Gmail message IDs. See [Exporting Data](/usage/exporting/) for usage examples.

---

## verify

Verify local archive integrity against Gmail.

```bash
msgvault verify <email> [flags]
```

| Flag | Description |
|---|---|
| `--sample-size N` | Messages to sample (default: 100) |

---

## stats

Show archive statistics.

```bash
msgvault stats
```

---

## list-senders

List top senders by message count.

```bash
msgvault list-senders [flags]
```

| Flag | Description |
|---|---|
| `--limit N` | Number of results (default: 10) |

---

## list-domains

List top sender domains by message count.

```bash
msgvault list-domains [flags]
```

| Flag | Description |
|---|---|
| `--limit N` | Number of results (default: 10) |

---

## list-labels

List all labels with message counts.

```bash
msgvault list-labels
```

---

## build-cache

Build or update the Parquet analytics cache.

```bash
msgvault build-cache [flags]
```

| Flag | Description |
|---|---|
| `--full-rebuild` | Discard existing cache and rebuild |

---

## mcp

Start the Model Context Protocol server for AI assistant integration.

```bash
msgvault mcp [flags]
```

| Flag | Default | Description |
|---|---|---|
| `--force-sql` | `false` | Always use SQL retrieval instead of FTS5 |

See [MCP Server](/usage/chat/) for configuration and tool reference.

---

## cancel-deletion

Cancel pending or in-progress deletion batches. When called without a batch ID, lists available batches.

```bash
msgvault cancel-deletion [batch-id]
msgvault cancel-deletion --all
```

| Flag | Description |
|---|---|
| `--all` | Cancel all pending and in-progress batches |

---

## repair-encoding

Fix UTF-8 encoding issues in existing messages.

```bash
msgvault repair-encoding
```
